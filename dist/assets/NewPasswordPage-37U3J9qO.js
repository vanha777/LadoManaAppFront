import{at as b,au as P,F as q,a9 as S,aa as s,ay as C,ab as A,ac as e,ad as I,ae as k,ag as d,av as $,aw as F,ah as m,ai as x,aj as t,ak as R,ax as T,al as H,as as N,an as n,ao as h,ap as E,aq as D}from"./index-kAVNsXXW.js";import{S as L}from"./PlanPremiumIcon-SGA5u43O.js";function B(){const p=b(),{enqueueSnackbar:w}=P(),[r,c]=q.useState(!1),l=typeof window<"u"?sessionStorage.getItem("email-recovery"):"",f=S().shape({code1:s().required("Code is required"),code2:s().required("Code is required"),code3:s().required("Code is required"),code4:s().required("Code is required"),code5:s().required("Code is required"),code6:s().required("Code is required"),email:s().required("Email is required").email("Email must be a valid email address"),password:s().min(6,"Password must be at least 6 characters").required("Password is required"),confirmPassword:s().required("Confirm password is required").oneOf([C("password")],"Passwords must match")}),j={code1:"",code2:"",code3:"",code4:"",code5:"",code6:"",email:l||"",password:"",confirmPassword:""},u=A({mode:"onChange",resolver:H(f),defaultValues:j}),{handleSubmit:y,formState:{isSubmitting:g,errors:a}}=u,v=async o=>{try{await new Promise(i=>setTimeout(i,500)),console.log("DATA:",{email:o.email,code:`${o.code1}${o.code2}${o.code3}${o.code4}${o.code5}${o.code6}`,password:o.password}),sessionStorage.removeItem("email-recovery"),w("Change password success!"),p(T.root)}catch(i){console.error(i)}};return e.jsx(I,{methods:u,onSubmit:y(v),children:e.jsxs(k,{spacing:3,children:[e.jsx(d,{name:"email",label:"Email",disabled:!!l,InputLabelProps:{shrink:!0}}),e.jsx($,{keyName:"code",inputs:["code1","code2","code3","code4","code5","code6"]}),(!!a.code1||!!a.code2||!!a.code3||!!a.code4||!!a.code5||!!a.code6)&&e.jsx(F,{error:!0,sx:{px:2},children:"Code is required"}),e.jsx(d,{name:"password",label:"Password",type:r?"text":"password",InputProps:{endAdornment:e.jsx(m,{position:"end",children:e.jsx(x,{onClick:()=>c(!r),edge:"end",children:e.jsx(t,{icon:r?"eva:eye-fill":"eva:eye-off-fill"})})})}}),e.jsx(d,{name:"confirmPassword",label:"Confirm New Password",type:r?"text":"password",InputProps:{endAdornment:e.jsx(m,{position:"end",children:e.jsx(x,{onClick:()=>c(!r),edge:"end",children:e.jsx(t,{icon:r?"eva:eye-fill":"eva:eye-off-fill"})})})}}),e.jsx(R,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:g,sx:{mt:3},children:"Update Password"})]})})}function O(){return e.jsxs(e.Fragment,{children:[e.jsx(N,{children:e.jsx("title",{children:" New Password | Minimal UI"})}),e.jsx(L,{sx:{mb:5,height:96}}),e.jsx(n,{variant:"h3",paragraph:!0,children:"Request sent successfully!"}),e.jsxs(n,{sx:{color:"text.secondary",mb:5},children:["We've sent a 6-digit confirmation email to your email.",e.jsx("br",{}),"Please enter the code in below box to verify your email."]}),e.jsx(B,{}),e.jsxs(n,{variant:"body2",sx:{my:3},children:["Don’t have a code?  ",e.jsx(h,{variant:"subtitle2",children:"Resend code"})]}),e.jsxs(h,{component:E,to:D.login,color:"inherit",variant:"subtitle2",sx:{mx:"auto",alignItems:"center",display:"inline-flex"},children:[e.jsx(t,{icon:"eva:chevron-left-fill",width:16}),"Return to sign in"]})]})}export{O as default};
