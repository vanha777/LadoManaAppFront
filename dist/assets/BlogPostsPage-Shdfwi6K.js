import{ac as t,aN as v,at as w,F as r,bR as C,bS as I,ah as A,aj as S,bT as k,bU as O,aO as R,ao as T,an as E,bV as N,ax as l,aA as D,d2 as F,as as L,aB as U,aD as q,ap as G,ae as H}from"./index-kAVNsXXW.js";import{o as u}from"./orderBy-9liVrfYv.js";import{G as g}from"./Grid-UjSMx0L8.js";import{S as x}from"./Skeleton-ET3ifG4q.js";import"./SkeletonConversationItem-L95VVb_N.js";import{C as K}from"./CustomBreadcrumbs-07KkEdSP.js";import{B as M,a as V}from"./BlogPostCommentList-shbdXebK.js";import{a as W}from"./IncrementerButton-SLvR_Q0x.js";import{p as _}from"./index-7OLVL5xd.js";import"./TextMaxLine-pXA0ho8x.js";import"./Card-yNtnckip.js";import"./CardContent-Yl8ry9fC.js";import"./Zoom-YdLcfH2Q.js";import"./Markdown-EScK2ww8.js";import"./EmptyContent-vRT2zqjA.js";import"./DialogActions-vKtJfWwg.js";function z({...a}){return t.jsxs(g,{item:!0,xs:12,sm:6,md:3,...a,children:[t.jsx(x,{variant:"rectangular",width:"100%",sx:{height:200,borderRadius:2}}),t.jsxs(v,{sx:{display:"flex",mt:1.5},children:[t.jsx(x,{variant:"circular",sx:{width:40,height:40}}),t.jsx(x,{variant:"text",sx:{mx:1,flexGrow:1}})]})]})}function $(){const a=w(),[o,c]=r.useState(""),[i,p]=r.useState([]),m=async s=>{try{if(c(s),s){const e=await N.get("/api/blog/posts/search",{params:{query:s}});p(e.data.results)}}catch(e){console.error(e)}},n=s=>{a(l.blog.view(_(s)))},d=s=>{s.key==="Enter"&&n(o)};return t.jsx(C,{size:"small",autoHighlight:!0,popupIcon:null,options:i,onInputChange:(s,e)=>m(e),getOptionLabel:s=>s.title,noOptionsText:t.jsx(I,{query:o}),isOptionEqualToValue:(s,e)=>s.id===e.id,componentsProps:{popper:{sx:{width:"280px !important"}},paper:{sx:{"& .MuiAutocomplete-option":{px:"8px !important"}}}},renderInput:s=>t.jsx(W,{...s,width:220,placeholder:"Search...",onKeyUp:d,InputProps:{...s.InputProps,startAdornment:t.jsx(A,{position:"start",children:t.jsx(S,{icon:"eva:search-fill",sx:{ml:1,color:"text.disabled"}})})}}),renderOption:(s,e,{inputValue:b})=>{const{title:h,cover:j}=e,P=k(h,b),y=O(h,P);return t.jsxs("li",{...s,children:[t.jsx(R,{alt:j,src:j,sx:{width:48,height:48,borderRadius:1,flexShrink:0,mr:1.5}}),t.jsx(T,{underline:"none",onClick:()=>n(h),children:y.map((f,B)=>t.jsx(E,{component:"span",variant:"subtitle2",color:f.highlight?"primary":"textPrimary",children:f.text},B))})]})}})}const J=[{value:"latest",label:"Latest"},{value:"popular",label:"Popular"},{value:"oldest",label:"Oldest"}];function ht(){const{themeStretch:a}=D(),[o,c]=r.useState([]),[i,p]=r.useState("latest"),m=Q(o,i),n=r.useCallback(async()=>{try{const s=await F.get("http://127.0.0.1:3333/posts",{withCredentials:!0});console.log(s.data),c(s.data)}catch(s){console.error(s)}},[]);r.useEffect(()=>{n()},[n]);const d=s=>{p(s.target.value)};return t.jsxs(t.Fragment,{children:[t.jsx(L,{children:t.jsx("title",{children:" Blog: Posts | Minimal UI"})}),t.jsxs(U,{maxWidth:a?!1:"lg",children:[t.jsx(K,{heading:"Blog",links:[{name:"Dashboard",href:l.root},{name:"Blog",href:l.blog.root},{name:"Posts"}],action:t.jsx(q,{component:G,to:l.blog.new,variant:"contained",startIcon:t.jsx(S,{icon:"eva:plus-fill"}),children:"New Post"})}),t.jsxs(H,{mb:5,direction:"row",alignItems:"center",justifyContent:"space-between",children:[t.jsx($,{}),t.jsx(M,{sortBy:i,sortOptions:J,onSort:d})]}),t.jsx(g,{container:!0,spacing:3,children:(o.length?m:[...Array(12)]).map((s,e)=>s?t.jsxs(g,{item:!0,xs:12,sm:6,md:e===0&&6||3,children:[" ",t.jsx(V,{posts:s,index:e})]},s.post.id):t.jsx(z,{},e))})]})]})}const Q=(a,o)=>o==="latest"?u(a,["createdAt"],["desc"]):o==="oldest"?u(a,["createdAt"],["asc"]):o==="popular"?u(a,["view"],["desc"]):a;export{ht as default};
