import{ac as e,ae as w,aj as p,cu as ie,aL as De,an as V,b5 as Fe,aN as Ie,aR as ce,aM as i,F as b,b7 as Re,cv as ke,ao as Ae,b_ as le,aS as de,ai as F,b3 as Oe,b4 as U,b2 as Q,aD as $,bi as H,ah as Ee,az as Ne,aA as Be,at as Le,cw as We,as as ze,aB as He,ax as D,ap as Me,aP as ae,be as M,cx as _}from"./index-kAVNsXXW.js";import{s as oe}from"./sumBy-LVdRNqgV.js";import{C as ue}from"./ConfirmDialog-XnXcLk1r.js";import{C as _e}from"./CustomBreadcrumbs-07KkEdSP.js";import{e as Ve,g as Ue}from"./utils-BH68Vpzu.js";import{u as $e}from"./useTable-l4SK5Cxu.js";import{a as qe,T as Ge,b as Je,c as Ke,d as Qe}from"./TablePaginationCustom-D5U7UEwi.js";import{c as Xe,T as Ye,a as Ze,b as et}from"./TableRow-zrsFapiu.js";import{T as C}from"./TableCell-7incTXUx.js";import{D as re}from"./DatePicker-Z7sQcGdH.js";import{C as se}from"./Card-yNtnckip.js";import{T as tt,a as nt}from"./Tabs-vRgd6uc9.js";import"./DialogTitle-vCHwm-ka.js";import"./dialogTitleClasses-wpKycvDL.js";import"./DialogContent-DKzr_HVR.js";import"./DialogActions-vKtJfWwg.js";import"./EmptyContent-vRT2zqjA.js";import"./TablePagination-Vshr5hr6.js";import"./KeyboardArrowRight-6uRlvlB4.js";import"./LastPage-N6rQPigF.js";import"./Grid-UjSMx0L8.js";T.propTypes={icon:i.string,title:i.string,color:i.string,price:i.number,total:i.number,percent:i.number};function T({title:l,total:g,icon:u,color:r,percent:a,price:m}){return e.jsxs(w,{direction:"row",alignItems:"center",justifyContent:"center",sx:{width:1,minWidth:200},children:[e.jsxs(w,{alignItems:"center",justifyContent:"center",sx:{position:"relative"},children:[e.jsx(p,{icon:u,width:24,sx:{color:r,position:"absolute"}}),e.jsx(ie,{variant:"determinate",value:a,size:56,thickness:4,sx:{color:r,opacity:.48}}),e.jsx(ie,{variant:"determinate",value:100,size:56,thickness:4,sx:{top:0,left:0,opacity:.48,position:"absolute",color:f=>De(f.palette.grey[500],.16)}})]}),e.jsxs(w,{spacing:.5,sx:{ml:2},children:[e.jsx(V,{variant:"h6",children:l}),e.jsxs(V,{variant:"subtitle2",children:[Fe(g)," ",e.jsx(Ie,{component:"span",sx:{color:"text.secondary",typography:"body2"},children:"invoices"})]}),e.jsx(V,{variant:"subtitle2",sx:{color:r},children:ce(m)})]})]})}he.propTypes={row:i.object,selected:i.bool,onEditRow:i.func,onViewRow:i.func,onDeleteRow:i.func,onSelectRow:i.func};function he({row:l,selected:g,onSelectRow:u,onViewRow:r,onEditRow:a,onDeleteRow:m}){const{sent:f,invoiceNumber:s,createDate:n,dueDate:c,status:h,invoiceTo:x,totalPrice:I}=l,[q,R]=b.useState(!1),[k,A]=b.useState(null),o=()=>{R(!0)},O=()=>{R(!1)},y=G=>{A(G.currentTarget)},S=()=>{A(null)};return e.jsxs(e.Fragment,{children:[e.jsxs(Xe,{hover:!0,selected:g,children:[e.jsx(C,{padding:"checkbox",children:e.jsx(Re,{checked:g,onClick:u})}),e.jsx(C,{children:e.jsxs(w,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(ke,{name:x.name}),e.jsxs("div",{children:[e.jsx(V,{variant:"subtitle2",noWrap:!0,children:x.name}),e.jsx(Ae,{noWrap:!0,variant:"body2",onClick:r,sx:{color:"text.disabled",cursor:"pointer"},children:`INV-${s}`})]})]})}),e.jsx(C,{align:"left",children:le(n)}),e.jsx(C,{align:"left",children:le(c)}),e.jsx(C,{align:"center",children:ce(I)}),e.jsx(C,{align:"center",sx:{textTransform:"capitalize"},children:f}),e.jsx(C,{align:"left",children:e.jsx(de,{variant:"soft",color:h==="paid"&&"success"||h==="unpaid"&&"warning"||h==="overdue"&&"error"||"default",children:h})}),e.jsx(C,{align:"right",children:e.jsx(F,{color:k?"inherit":"default",onClick:y,children:e.jsx(p,{icon:"eva:more-vertical-fill"})})})]}),e.jsxs(Oe,{open:k,onClose:S,arrow:"right-top",sx:{width:160},children:[e.jsxs(U,{onClick:()=>{r(),S()},children:[e.jsx(p,{icon:"eva:eye-fill"}),"View"]}),e.jsxs(U,{onClick:()=>{a(),S()},children:[e.jsx(p,{icon:"eva:edit-fill"}),"Edit"]}),e.jsx(Q,{sx:{borderStyle:"dashed"}}),e.jsxs(U,{onClick:()=>{o(),S()},sx:{color:"error.main"},children:[e.jsx(p,{icon:"eva:trash-2-outline"}),"Delete"]})]}),e.jsx(ue,{open:q,onClose:O,title:"Delete",content:"Are you sure want to delete?",action:e.jsx($,{variant:"contained",color:"error",onClick:m,children:"Delete"})})]})}const K=160;xe.propTypes={isFiltered:i.bool,filterName:i.string,onFilterName:i.func,onResetFilter:i.func,filterService:i.string,onFilterEndDate:i.func,onFilterService:i.func,onFilterStartDate:i.func,filterEndDate:i.instanceOf(Date),filterStartDate:i.instanceOf(Date),optionsService:i.arrayOf(i.string)};function xe({isFiltered:l,filterName:g,onFilterName:u,filterEndDate:r,filterService:a,onResetFilter:m,optionsService:f,filterStartDate:s,onFilterService:n,onFilterEndDate:c,onFilterStartDate:h}){return e.jsxs(w,{spacing:2,alignItems:"center",direction:{xs:"column",md:"row"},sx:{px:2.5,py:3},children:[e.jsx(H,{fullWidth:!0,select:!0,label:"Service type",value:a,onChange:n,SelectProps:{MenuProps:{PaperProps:{sx:{maxHeight:220}}}},sx:{maxWidth:{md:K},textTransform:"capitalize"},children:f.map(x=>e.jsx(U,{value:x,sx:{mx:1,borderRadius:.75,typography:"body2",textTransform:"capitalize"},children:x},x))}),e.jsx(re,{label:"Start date",value:s,onChange:h,renderInput:x=>e.jsx(H,{...x,fullWidth:!0,sx:{maxWidth:{md:K}}})}),e.jsx(re,{label:"End date",value:r,onChange:c,renderInput:x=>e.jsx(H,{...x,fullWidth:!0,sx:{maxWidth:{md:K}}})}),e.jsx(H,{fullWidth:!0,value:g,onChange:u,placeholder:"Search client or invoice number...",InputProps:{startAdornment:e.jsx(Ee,{position:"start",children:e.jsx(p,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}),l&&e.jsx($,{color:"error",sx:{flexShrink:0},onClick:m,startIcon:e.jsx(p,{icon:"eva:trash-2-outline"}),children:"Clear"})]})}const it=["all","full stack development","backend development","ui design","ui/ux design","front end development"],lt=[{id:"invoiceNumber",label:"Client",align:"left"},{id:"createDate",label:"Create",align:"left"},{id:"dueDate",label:"Due",align:"left"},{id:"price",label:"Amount",align:"center",width:140},{id:"sent",label:"Sent",align:"center",width:140},{id:"status",label:"Status",align:"left"},{id:""}];function Dt(){const l=Ne(),{themeStretch:g}=Be(),u=Le(),{dense:r,page:a,order:m,orderBy:f,rowsPerPage:s,setPage:n,selected:c,setSelected:h,onSelectRow:x,onSelectAllRows:I,onSort:q,onChangeDense:R,onChangePage:k,onChangeRowsPerPage:A}=$e({defaultOrderBy:"createDate"}),[o,O]=b.useState(We),[y,S]=b.useState(""),[G,X]=b.useState(!1),[E,Y]=b.useState("all"),[N,Z]=b.useState(null),[B,ee]=b.useState("all"),[L,te]=b.useState(null),j=at({inputData:o,comparator:Ue(m,f),filterName:y,filterService:B,filterStatus:E,filterStartDate:L,filterEndDate:N}),J=j.slice(a*s,a*s+s),pe=r?56:76,me=E!=="all"||y!==""||B!=="all"||!!L&&!!N,fe=!j.length&&!!y||!j.length&&!!E||!j.length&&!!B||!j.length&&!!N||!j.length&&!!L,v=t=>o.filter(d=>d.status===t).length,W=t=>oe(o.filter(d=>d.status===t),"totalPrice"),z=t=>v(t)/o.length*100,ge=[{value:"all",label:"All",color:"info",count:o.length},{value:"paid",label:"Paid",color:"success",count:v("paid")},{value:"unpaid",label:"Unpaid",color:"warning",count:v("unpaid")},{value:"overdue",label:"Overdue",color:"error",count:v("overdue")},{value:"draft",label:"Draft",color:"default",count:v("draft")}],je=()=>{X(!0)},ne=()=>{X(!1)},ve=(t,d)=>{n(0),Y(d)},be=t=>{n(0),S(t.target.value)},Ce=t=>{n(0),ee(t.target.value)},Se=t=>{const d=o.filter(P=>P.id!==t);h([]),O(d),a>0&&J.length<2&&n(a-1)},we=t=>{const d=o.filter(P=>!t.includes(P.id));if(h([]),O(d),a>0){if(t.length===J.length)n(a-1);else if(t.length===j.length)n(0);else if(t.length>J.length){const P=Math.ceil((o.length-t.length)/s)-1;n(P)}}},ye=t=>{u(D.invoice.edit(t))},Te=t=>{u(D.invoice.view(t))},Pe=()=>{S(""),Y("all"),ee("all"),Z(null),te(null)};return e.jsxs(e.Fragment,{children:[e.jsx(ze,{children:e.jsx("title",{children:" Invoice: List | Minimal UI"})}),e.jsxs(He,{maxWidth:g?!1:"lg",children:[e.jsx(_e,{heading:"Invoice List",links:[{name:"Dashboard",href:D.root},{name:"Invoices",href:D.invoice.root},{name:"List"}],action:e.jsx($,{component:Me,to:D.invoice.new,variant:"contained",startIcon:e.jsx(p,{icon:"eva:plus-fill"}),children:"New Invoice"})}),e.jsx(se,{sx:{mb:5},children:e.jsx(ae,{children:e.jsxs(w,{direction:"row",divider:e.jsx(Q,{orientation:"vertical",flexItem:!0,sx:{borderStyle:"dashed"}}),sx:{py:2},children:[e.jsx(T,{title:"Total",total:o.length,percent:100,price:oe(o,"totalPrice"),icon:"ic:round-receipt",color:l.palette.info.main}),e.jsx(T,{title:"Paid",total:v("paid"),percent:z("paid"),price:W("paid"),icon:"eva:checkmark-circle-2-fill",color:l.palette.success.main}),e.jsx(T,{title:"Unpaid",total:v("unpaid"),percent:z("unpaid"),price:W("unpaid"),icon:"eva:clock-fill",color:l.palette.warning.main}),e.jsx(T,{title:"Overdue",total:v("overdue"),percent:z("overdue"),price:W("overdue"),icon:"eva:bell-fill",color:l.palette.error.main}),e.jsx(T,{title:"Draft",total:v("draft"),percent:z("draft"),price:W("draft"),icon:"eva:file-fill",color:l.palette.text.secondary})]})})}),e.jsxs(se,{children:[e.jsx(tt,{value:E,onChange:ve,sx:{px:2,bgcolor:"background.neutral"},children:ge.map(t=>e.jsx(nt,{value:t.value,label:t.label,icon:e.jsx(de,{color:t.color,sx:{mr:1},children:t.count})},t.value))}),e.jsx(Q,{}),e.jsx(xe,{filterName:y,isFiltered:me,filterService:B,filterEndDate:N,onFilterName:be,optionsService:it,filterStartDate:L,onResetFilter:Pe,onFilterService:Ce,onFilterStartDate:t=>{te(t)},onFilterEndDate:t=>{Z(t)}}),e.jsxs(Ye,{sx:{position:"relative",overflow:"unset"},children:[e.jsx(qe,{dense:r,numSelected:c.length,rowCount:o.length,onSelectAllRows:t=>I(t,o.map(d=>d.id)),action:e.jsxs(w,{direction:"row",children:[e.jsx(M,{title:"Sent",children:e.jsx(F,{color:"primary",children:e.jsx(p,{icon:"ic:round-send"})})}),e.jsx(M,{title:"Download",children:e.jsx(F,{color:"primary",children:e.jsx(p,{icon:"eva:download-outline"})})}),e.jsx(M,{title:"Print",children:e.jsx(F,{color:"primary",children:e.jsx(p,{icon:"eva:printer-fill"})})}),e.jsx(M,{title:"Delete",children:e.jsx(F,{color:"primary",onClick:je,children:e.jsx(p,{icon:"eva:trash-2-outline"})})})]})}),e.jsx(ae,{children:e.jsxs(Ze,{size:r?"small":"medium",sx:{minWidth:800},children:[e.jsx(Ge,{order:m,orderBy:f,headLabel:lt,rowCount:o.length,numSelected:c.length,onSort:q,onSelectAllRows:t=>I(t,o.map(d=>d.id))}),e.jsxs(et,{children:[j.slice(a*s,a*s+s).map(t=>e.jsx(he,{row:t,selected:c.includes(t.id),onSelectRow:()=>x(t.id),onViewRow:()=>Te(t.id),onEditRow:()=>ye(t.id),onDeleteRow:()=>Se(t.id)},t.id)),e.jsx(Je,{height:pe,emptyRows:Ve(a,s,o.length)}),e.jsx(Ke,{isNotFound:fe})]})]})})]}),e.jsx(Qe,{count:j.length,page:a,rowsPerPage:s,onPageChange:k,onRowsPerPageChange:A,dense:r,onChangeDense:R})]})]}),e.jsx(ue,{open:G,onClose:ne,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",c.length," "]})," items?"]}),action:e.jsx($,{variant:"contained",color:"error",onClick:()=>{we(c),ne()},children:"Delete"})})]})}function at({inputData:l,comparator:g,filterName:u,filterStatus:r,filterService:a,filterStartDate:m,filterEndDate:f}){const s=l.map((n,c)=>[n,c]);return s.sort((n,c)=>{const h=g(n[0],c[0]);return h!==0?h:n[1]-c[1]}),l=s.map(n=>n[0]),u&&(l=l.filter(n=>n.invoiceNumber.toLowerCase().indexOf(u.toLowerCase())!==-1||n.invoiceTo.name.toLowerCase().indexOf(u.toLowerCase())!==-1)),r!=="all"&&(l=l.filter(n=>n.status===r)),a!=="all"&&(l=l.filter(n=>n.items.some(c=>c.service===a))),m&&f&&(l=l.filter(n=>_(n.createDate)>=_(m)&&_(n.createDate)<=_(f))),l}export{Dt as default};
