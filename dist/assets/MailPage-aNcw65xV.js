import{at as R,eE as me,ac as e,cM as ue,aj as c,eF as O,dF as je,an as v,aM as n,ax as $,eu as fe,bl as S,F as f,ae as h,aD as L,b2 as A,aP as W,dG as ge,bJ as F,bK as z,ba as V,be as b,ai as u,c0 as P,b7 as E,cv as J,aN as I,aS as be,b_ as ye,aJ as w,az as ve,cR as ke,aV as Ce,bi as we,ah as Me,bj as N,bx as Se,dJ as Ie,eG as De,eH as Te,ao as _,b9 as Ae,aA as Ee,bF as $e,bW as G,eI as We,eJ as Be,eK as Ne,aB as Re,as as Le}from"./index-kAVNsXXW.js";import{C as Pe}from"./CustomBreadcrumbs-07KkEdSP.js";import{a as Oe}from"./SkeletonConversationItem-L95VVb_N.js";import{E as Fe}from"./EmptyContent-vRT2zqjA.js";import{M as ze}from"./Markdown-EScK2ww8.js";import{C as _e}from"./Card-yNtnckip.js";import"./Skeleton-ET3ifG4q.js";const Ge={all:"eva:email-fill",inbox:"eva:inbox-fill",trash:"eva:trash-2-outline",drafts:"eva:file-fill",spam:"ic:round-report",sent:"ic:round-send",starred:"eva:star-fill",important:"ic:round-label-important",id_social:"ic:round-label",id_promotions:"ic:round-label",id_forums:"ic:round-label"};K.propTypes={label:n.object};function K({label:t,...s}){const a=R(),{active:l}=me(H(t)),i=()=>{a(H(t))},r=t.unreadCount!==0,p=Ge[t.id];return e.jsxs(ue,{onClick:i,sx:{px:3,height:48,typography:"body2",color:"text.secondary",textTransform:"capitalize",...l&&{color:"text.primary",bgcolor:"action.selected",fontWeight:"fontWeightMedium"}},...s,children:[e.jsx(c,{icon:p,sx:{mr:2,width:O.NAV_ITEM,height:O.NAV_ITEM,color:t.color}}),e.jsx(je,{disableTypography:!0,primary:t.name}),r&&e.jsx(v,{variant:"caption",children:t.unreadCount})]})}const H=t=>{const s=$.mail.root;return t.type==="system"?`${s}/${t.id}`:t.type==="custom"?`${s}/label/${t.name}`:s};X.propTypes={items:n.array,openNav:n.bool,onCloseNav:n.func,onOpenCompose:n.func};function X({items:t,openNav:s,onOpenCompose:a,onCloseNav:l}){const{pathname:i}=fe(),r=S("up","md"),p=!t.length;f.useEffect(()=>{s&&l()},[i]);const o=()=>{l(),a()},j=e.jsxs(e.Fragment,{children:[e.jsx(h,{justifyContent:"center",flexShrink:0,sx:{px:2.5,height:80},children:e.jsx(L,{fullWidth:!0,color:"inherit",variant:"contained",startIcon:e.jsx(c,{icon:"eva:edit-fill"}),onClick:o,sx:{bgcolor:"text.primary",color:x=>x.palette.mode==="light"?"common.white":"grey.800","&:hover":{bgcolor:"text.primary",color:x=>x.palette.mode==="light"?"common.white":"grey.800"}},children:"Compose"})}),e.jsx(A,{}),e.jsx(W,{children:e.jsx(ge,{disablePadding:!0,children:(p?[...Array(8)]:t).map((x,g)=>x?e.jsx(K,{label:x},x.id):e.jsx(Oe,{},g))})})]});return r?e.jsx(F,{variant:"permanent",PaperProps:{sx:{width:z.W_BASE,position:"relative"}},children:j}):e.jsx(F,{open:s,onClose:l,ModalProps:{keepMounted:!0},PaperProps:{sx:{width:z.W_BASE}},children:j})}Z.propTypes={sx:n.object,onDelete:n.func,onHidden:n.func,onArchive:n.func,onMarkRead:n.func};function Z({onArchive:t,onDelete:s,onMarkRead:a,onHidden:l,sx:i,...r}){const p=[{name:"Archive",icon:"eva:archive-fill",action:t},{name:"Delete",icon:"eva:trash-2-outline",action:s},{name:"Mark Email Read",icon:"ic:round-mark-email-read",action:a},{name:"Hidden Email",icon:"eva:eye-off-fill",action:l}];return e.jsx(V,{variant:"outlined",sx:{top:12,right:12,bottom:12,zIndex:99,opacity:0,display:"flex",position:"absolute",alignItems:"center",boxShadow:o=>o.customShadows.z8,transition:o=>o.transitions.create("opacity"),...i},...r,children:p.map(o=>e.jsx(b,{title:o.name,children:e.jsx(u,{size:"small",onClick:o.action,sx:{mx:.75,"&:hover":{color:"text.primary"}},children:e.jsx(c,{icon:o.icon,width:24})})},o.name))})}const He=w("div")(({theme:t})=>({position:"relative",padding:t.spacing(0,2),color:t.palette.text.secondary,backgroundColor:t.palette.background.neutral,borderBottom:`1px solid ${t.palette.divider}`,[t.breakpoints.up("md")]:{display:"flex",alignItems:"center"},"&:hover":{zIndex:9,position:"relative",boxShadow:t.customShadows.z24,"& #mailActions":{opacity:1}}})),Ue=w("div")(({theme:t})=>({display:"flex",cursor:"pointer",padding:t.spacing(2,0),transition:t.transitions.create("padding"),[t.breakpoints.up("md")]:{flexGrow:1,minWidth:0,alignItems:"center"}})),Ve=w(t=>e.jsx(v,{component:"span",noWrap:!0,...t}))(({theme:t})=>({...t.typography.body2,marginRight:t.spacing(2),[t.breakpoints.up("md")]:{width:160,flexShrink:0}})),Je=w(t=>e.jsx(v,{component:"span",noWrap:!0,...t}))(({theme:t})=>({...t.typography.body2,marginRight:t.spacing(2),flexGrow:1})),Ke=w("div")(({theme:t})=>({...t.typography.caption,[t.breakpoints.up("md")]:{width:96,flexShrink:0,textAlign:"right"}})),Xe=w(c)(({theme:t})=>({top:16,right:16,zIndex:9,position:"absolute",[t.breakpoints.up("md")]:{flexShrink:0,position:"unset",marginLeft:t.spacing(2)}}));q.propTypes={dense:n.bool,mail:n.object,onSelect:n.func,selected:n.bool,getLabel:n.func,onDeselect:n.func};function q({mail:t,dense:s,selected:a,onSelect:l,onDeselect:i,getLabel:r,...p}){const o=P(),j=R(),x=S("up","md"),g=!!t.attachments.length,d=!t.isUnread,C=k=>k?l():i(),M=()=>{j(Ze(o,t.id))};return e.jsxs(He,{sx:{...a&&{bgcolor:"action.selected"},...d&&{color:"text.primary",bgcolor:"background.paper"}},...p,children:[x&&e.jsxs(h,{direction:"row",alignItems:"center",sx:{mr:2},children:[e.jsx(E,{checked:a,onChange:k=>C(k.target.checked)}),e.jsx(b,{title:"Starred",children:e.jsx(E,{color:"warning",defaultChecked:t.isStarred,icon:e.jsx(c,{icon:"eva:star-outline"}),checkedIcon:e.jsx(c,{icon:"eva:star-fill"})})}),e.jsx(b,{title:"Important",children:e.jsx(E,{color:"warning",defaultChecked:t.isImportant,checkedIcon:e.jsx(c,{icon:"ic:round-label-important"}),icon:e.jsx(c,{icon:"ic:round-label-important"})})})]}),e.jsxs(Ue,{onClick:M,sx:{...s&&{py:1}},children:[e.jsx(J,{alt:t.from.name,src:t.from.avatar||"",name:t.from.name,sx:{width:32,height:32,mr:2}}),e.jsxs(h,{flexGrow:1,alignItems:{md:"center"},flexDirection:{xs:"column",md:"row"},sx:{minWidth:0},children:[e.jsx(Ve,{sx:{...d&&{fontWeight:"fontWeightBold"}},children:t.from.name}),e.jsxs(Je,{children:[e.jsx(I,{component:"span",sx:{...d&&{fontWeight:"fontWeightBold"}},children:t.subject})," - ",e.jsx(I,{component:"span",sx:{...d&&{color:"text.secondary"}},children:t.message})]}),x&&e.jsx(h,{direction:"row",spacing:1,children:t.labelIds.map(k=>{const y=r(k);return y?e.jsx(be,{sx:{bgcolor:y.color,color:B=>B.palette.getContrastText(y.color||"")},children:y.name},y.id):null})}),g&&e.jsx(Xe,{icon:"eva:attach-2-fill"}),e.jsx(Ke,{sx:{...d&&{fontWeight:"fontWeightBold"}},children:ye(t.createdAt)})]})]}),e.jsx(Z,{id:"mailActions",onArchive:()=>console.log("ARCHIVE",t.id),onDelete:()=>console.log("DELETE",t.id),onMarkRead:()=>console.log("MARKREAD",t.id),onHidden:()=>console.log("HIDDEN",t.id)})]})}const Ze=(t,s)=>{const{systemLabel:a,customLabel:l}=t,i=$.mail.root;return a?`${i}/${a}/${s}`:l?`${i}/label/${l}/${s}`:i};Q.propTypes={dense:n.bool,isEmpty:n.bool,labels:n.array,mails:n.object,isLoading:n.bool,onSelectMail:n.func,selectedMails:n.func,onDeselectMail:n.func};function Q({mails:t,dense:s,labels:a,isEmpty:l,isLoading:i,onSelectMail:r,selectedMails:p,onDeselectMail:o}){const j=ve(),{allIds:x,byId:g}=t;return e.jsxs(h,{sx:{position:"relative",height:"calc(100% - 80px)"},children:[i&&e.jsx(h,{alignItems:"center",justifyContent:"center",sx:{top:0,left:0,width:1,height:1,zIndex:9,position:"absolute",...ke({color:j.palette.background.paper})},children:e.jsx(Ce,{color:"inherit",sx:{width:1,maxWidth:320}})}),l&&!i?e.jsx(Fe,{title:"There is no conversation",img:"/assets/illustrations/illustration_empty_mail.svg"}):e.jsx(W,{sx:{height:1},children:e.jsx(h,{sx:{minWidth:{md:960}},children:x.map(d=>e.jsx(q,{dense:s,mail:g[d],selected:p(d),onSelect:()=>r(d),onDeselect:()=>o(d),getLabel:C=>a.filter(M=>M.id===C)[0]},d))})})]})}Y.propTypes={onOpenNav:n.func,mailsLength:n.number,onToggleDense:n.func,onSelectAllMails:n.func,onDeselectAllMails:n.func,selectedMailsLength:n.number};function Y({onOpenNav:t,mailsLength:s,selectedMailsLength:a,onSelectAllMails:l,onDeselectAllMails:i,onToggleDense:r,...p}){const o=S("up","sm"),j=S("up","md"),x=s>0&&a===s,g=a>0&&a<s;return e.jsxs(h,{spacing:2,direction:"row",alignItems:"center",flexShrink:0,sx:{px:2,height:80,borderBottom:d=>`solid 1px ${d.palette.divider}`},...p,children:[e.jsxs(h,{direction:"row",alignItems:"center",flexGrow:1,children:[!j&&e.jsx(u,{onClick:t,children:e.jsx(c,{icon:"eva:menu-fill"})}),o&&e.jsxs(e.Fragment,{children:[e.jsx(E,{checked:x,indeterminate:g,onChange:d=>d.target.checked?l():i()}),e.jsx(b,{title:"Refresh",children:e.jsx(u,{children:e.jsx(c,{icon:"eva:refresh-fill"})})}),e.jsx(b,{title:"Dense",children:e.jsx(u,{onClick:r,children:e.jsx(c,{icon:"eva:collapse-fill"})})}),e.jsx(b,{title:"More",children:e.jsx(u,{children:e.jsx(c,{icon:"eva:more-vertical-fill"})})})]})]}),e.jsx(we,{size:"small",placeholder:"Search",InputProps:{startAdornment:e.jsx(Me,{position:"start",children:e.jsx(c,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})},sx:{maxWidth:180}}),o&&e.jsxs(I,{sx:{display:"flex",alignItems:"center",flexShrink:0},children:[e.jsxs(v,{variant:"body2",sx:{color:"text.secondary"},children:["1 - ",s," of ",s]}),e.jsx(b,{title:"Next page",children:e.jsx(u,{children:e.jsx(c,{icon:"eva:arrow-ios-back-fill"})})}),e.jsx(b,{title:"Previous page",children:e.jsx(u,{children:e.jsx(c,{icon:"eva:arrow-ios-forward-fill"})})})]})]})}function qe(){const t=f.useRef(null),[s,a]=f.useState(""),l=r=>{a(r.target.value)},i=()=>{var r;(r=t.current)==null||r.click()};return e.jsxs(e.Fragment,{children:[e.jsx(N,{fullWidth:!0,multiline:!0,minRows:2,maxRows:8,value:s,placeholder:"Type a message",onChange:l,sx:{p:2,borderTop:r=>`solid 1px ${r.palette.divider}`}}),e.jsxs(h,{direction:"row",alignItems:"center",justifyContent:"flex-end",sx:{p:r=>r.spacing(0,3,3,0)},children:[e.jsx(u,{size:"small",onClick:i,children:e.jsx(c,{icon:"ic:round-add-photo-alternate"})}),e.jsx(u,{size:"small",onClick:i,children:e.jsx(c,{icon:"eva:attach-2-fill"})}),e.jsx(L,{variant:"contained",sx:{ml:2},children:"Send"})]}),e.jsx("input",{type:"file",ref:t,style:{display:"none"}})]})}ee.propTypes={attachments:n.array};function ee({attachments:t}){return e.jsx(I,{sx:{p:2,bgcolor:"background.neutral",borderTop:s=>`solid 1px ${s.palette.divider}`},children:e.jsx(W,{children:e.jsx(h,{direction:"row",spacing:1,children:t.map(s=>e.jsx(te,{file:s},s.name))})})})}te.propTypes={file:n.object};function te({file:t}){return e.jsx(h,{alignItems:"center",justifyContent:"center",sx:{width:56,height:56,borderRadius:1,overflow:"hidden",position:"relative",bgcolor:"background.paper"},children:e.jsx(Se,{tooltip:!0,file:t.preview,onDownload:()=>console.log("DOWNLOAD")})})}const Qe=w("div")(({theme:t})=>({"& > p":{...t.typography.body1,marginBottom:t.spacing(2)}}));se.propTypes={attachments:n.array,message:n.string,subject:n.string};function se({subject:t,message:s,attachments:a}){return e.jsxs(e.Fragment,{children:[e.jsx(W,{children:e.jsxs(I,{sx:{p:{xs:3,md:5}},children:[e.jsx(v,{variant:"h3",gutterBottom:!0,children:t}),e.jsx(Qe,{children:e.jsx(ze,{children:s})})]})}),!!a.length&&e.jsx(ee,{attachments:a}),e.jsx(qe,{})]})}const U=1998,T=24;ne.propTypes={onCloseCompose:n.func};function ne({onCloseCompose:t}){const s=S("up","sm"),[a,l]=f.useState(""),[i,r]=f.useState(!1),p=o=>{l(o)};return e.jsxs(Ie,{children:[(i||!s)&&e.jsx(De,{open:!0,sx:{zIndex:U}}),e.jsxs(V,{sx:{right:0,bottom:0,borderRadius:2,zIndex:U+1,m:`${T}px`,position:"fixed",display:"flex",flexDirection:"column",boxShadow:o=>o.customShadows.dropdown,...i&&{m:0,right:T/2,bottom:T/2,width:`calc(100% - ${T}px)`,height:`calc(100% - ${T}px)`}},children:[e.jsxs(h,{direction:"row",alignItems:"center",sx:{py:2,pl:2.5,pr:1},children:[e.jsx(v,{variant:"h6",sx:{flexGrow:1},children:"New Message"}),e.jsx(u,{onClick:()=>r(!i),children:e.jsx(c,{icon:i?"eva:collapse-fill":"eva:expand-fill"})}),e.jsx(u,{onClick:t,children:e.jsx(c,{icon:"eva:close-fill"})})]}),e.jsx(A,{}),e.jsx(N,{placeholder:"To",sx:{px:2,height:40}}),e.jsx(A,{}),e.jsx(N,{placeholder:"Subject",sx:{px:2,height:40}}),e.jsx(A,{}),e.jsx(Te,{simple:!0,id:"compose-mail",value:a,onChange:p,placeholder:"Type a message",sx:{flexGrow:1,borderColor:"transparent"}}),e.jsx(A,{}),e.jsxs(h,{direction:"row",alignItems:"center",sx:{py:2,px:3},children:[e.jsx(L,{variant:"contained",sx:{mr:2},children:"Send"}),e.jsx(u,{children:e.jsx(c,{icon:"ic:round-add-photo-alternate"})}),e.jsx(u,{children:e.jsx(c,{icon:"eva:attach-2-fill"})})]})]})]})}oe.propTypes={sx:n.object,mailTo:n.array,mailFrom:n.object,createdAt:n.string};function oe({mailFrom:t,mailTo:s,createdAt:a,sx:l,...i}){const r=R(),{systemLabel:p,customLabel:o}=P(),j=S("up","sm"),x=$.mail.root,g=()=>r(p?`${x}/${p}`:o?`${x}/label/${o}`:`${x}/inbox`);return e.jsxs(h,{direction:"row",alignItems:"center",flexShrink:0,sx:{px:2,height:80,borderBottom:d=>`solid 1px ${d.palette.divider}`,...l},...i,children:[e.jsxs(h,{direction:"row",alignItems:"center",flexGrow:1,children:[e.jsx(b,{title:"Back",children:e.jsx(u,{onClick:g,children:e.jsx(c,{icon:"eva:arrow-ios-back-fill"})})}),e.jsx(J,{alt:t.name,src:t.avatar||"",name:t.name}),e.jsxs(I,{sx:{ml:2},children:[e.jsx(v,{display:"inline",variant:"subtitle2",children:t.name}),e.jsx(_,{variant:"caption",sx:{color:"text.secondary",ml:.5},children:`<${t.email}>`}),e.jsxs(v,{variant:"caption",component:"div",noWrap:!0,sx:{mt:.5},children:["To: ",s.map(d=>e.jsx(_,{color:"inherit",children:d.email},d.email))]})]})]}),e.jsxs(h,{direction:"row",alignItems:"center",children:[j&&e.jsxs(e.Fragment,{children:[e.jsx(v,{variant:"caption",component:"div",sx:{color:"text.secondary"},children:Ae(a)}),e.jsx(b,{title:"Reply",children:e.jsx(u,{children:e.jsx(c,{icon:"ic:round-reply"})})})]}),e.jsx(b,{title:"More options",children:e.jsx(u,{children:e.jsx(c,{icon:"eva:more-vertical-fill"})})})]})]})}function Ye(){const{themeStretch:t}=Ee(),s=$e(),a=P(),{mailId:l=""}=a,{mails:i,labels:r,isLoading:p}=G(m=>m.mail),o=G(m=>m.mail.mails.byId[l]),[j,x]=f.useState(!1),[g,d]=f.useState(!1),[C,M]=f.useState(!1),[k,y]=f.useState([]);f.useEffect(()=>{s(We(a))},[s,a]),f.useEffect(()=>{l&&s(Be(l))},[s,l]),f.useEffect(()=>{s(Ne())},[s]),f.useEffect(()=>{C?document.body.style.overflow="hidden":document.body.style.overflow=""},[C]);const B=()=>{x(!j)},ie=()=>{d(!0)},ae=()=>{d(!1)},re=()=>{M(!0)},le=()=>{M(!1)},ce=m=>{y(D=>D.includes(m)?D:[...D,m])},de=()=>{y(i.allIds.map(m=>m))},xe=m=>{y(D=>D.filter(he=>he!==m))},pe=()=>{y([])};return e.jsxs(e.Fragment,{children:[e.jsxs(Re,{maxWidth:t?!1:"xl",children:[e.jsx(Pe,{heading:"Mail",links:[{name:"Dashboard",href:$.root},{name:"Mail"}]}),e.jsxs(_e,{sx:{height:{md:"72vh"},display:{md:"flex"}},children:[e.jsx(X,{items:r,openNav:g,onCloseNav:ae,onOpenCompose:re}),e.jsx(h,{flexGrow:1,sx:{overflow:"hidden"},children:o?e.jsxs(e.Fragment,{children:[e.jsx(oe,{mailFrom:o.from,mailTo:o.to,createdAt:o.createdAt}),e.jsx(se,{subject:o.subject,message:o.message,attachments:o.attachments})]}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{onOpenNav:ie,mailsLength:i.allIds.length,selectedMailsLength:k.length,onSelectAllMails:de,onDeselectAllMails:pe,onToggleDense:B}),e.jsx(Q,{dense:j,mails:i,labels:r,onSelectMail:m=>ce(m),onDeselectMail:m=>xe(m),selectedMails:m=>k.includes(m),isLoading:p,isEmpty:!i.allIds.length&&!p})]})})]})]}),C&&e.jsx(ne,{onCloseCompose:le})]})}function rt(){return e.jsxs(e.Fragment,{children:[e.jsx(Le,{children:e.jsx("title",{children:" Mail | Minimal UI"})}),e.jsx(Ye,{})]})}export{rt as default};
