import{at as M,au as U,a9 as $,aa as S,c9 as v,ca as q,F as c,ab as E,ac as e,ad as z,ae as l,ag as t,an as b,cb as K,cc as V,cd as y,bM as _,bY as W,ce as J,ah as T,aN as R,ak as Y,aM as k,ax as Q,al as X}from"./index-kAVNsXXW.js";import{G as d}from"./Grid-UjSMx0L8.js";import{C as j}from"./Card-yNtnckip.js";const F=[{label:"Men",value:"Men"},{label:"Women",value:"Women"},{label:"Kids",value:"Kids"}],f=[{group:"Clothing",classify:["Shirts","T-shirts","Jeans","Leather"]},{group:"Tailored",classify:["Suits","Blazers","Trousers","Waistcoats"]},{group:"Accessories",classify:["Shoes","Backpacks and bags","Bracelets","Face masks"]}],A=["Toy Story 3","Logan","Full Metal Jacket","Dangal","The Sting","2001: A Space Odyssey","Singin' in the Rain","Toy Story","Bicycle Thieves","The Kid","Inglourious Basterds","Snatch","3 Idiots"];Z.propTypes={isEdit:k.bool,currentProduct:k.object};function Z({isEdit:o,currentProduct:s}){const C=M(),{enqueueSnackbar:I}=U(),N=$().shape({name:S().required("Name is required"),images:v().min(1,"Images is required"),tags:v().min(2,"Must have at least 2 tags"),price:q().moreThan(0,"Price should not be $0.00"),description:S().required("Description is required")}),x=c.useMemo(()=>({name:(s==null?void 0:s.name)||"",description:(s==null?void 0:s.description)||"",images:(s==null?void 0:s.images)||[],code:(s==null?void 0:s.code)||"",sku:(s==null?void 0:s.sku)||"",price:(s==null?void 0:s.price)||0,priceSale:(s==null?void 0:s.priceSale)||0,tags:(s==null?void 0:s.tags)||[A[0]],inStock:!0,taxes:!0,gender:(s==null?void 0:s.gender)||F[2].value,category:(s==null?void 0:s.category)||f[0].classify[1]}),[s]),r=E({resolver:X(N),defaultValues:x}),{reset:h,watch:O,setValue:n,handleSubmit:D,formState:{isSubmitting:w}}=r,p=O();c.useEffect(()=>{o&&s&&h(x),o||h(x)},[o,s]);const H=async a=>{try{await new Promise(i=>setTimeout(i,500)),h(),I(o?"Update success!":"Create success!"),C(Q.eCommerce.list),console.log("DATA",a)}catch(i){console.error(i)}},B=c.useCallback(a=>{const i=p.images||[],m=a.map(g=>Object.assign(g,{preview:URL.createObjectURL(g)}));n("images",[...i,...m],{shouldValidate:!0})},[n,p.images]),L=a=>{var m;const i=p.images&&((m=p.images)==null?void 0:m.filter(g=>g!==a));n("images",i)},G=()=>{n("images",[])};return e.jsx(z,{methods:r,onSubmit:D(H),children:e.jsxs(d,{container:!0,spacing:3,children:[e.jsx(d,{item:!0,xs:12,md:8,children:e.jsx(j,{sx:{p:3},children:e.jsxs(l,{spacing:3,children:[e.jsx(t,{name:"name",label:"Product Name"}),e.jsxs(l,{spacing:1,children:[e.jsx(b,{variant:"subtitle2",sx:{color:"text.secondary"},children:"Description"}),e.jsx(K,{simple:!0,name:"description"})]}),e.jsxs(l,{spacing:1,children:[e.jsx(b,{variant:"subtitle2",sx:{color:"text.secondary"},children:"Images"}),e.jsx(V,{multiple:!0,thumbnail:!0,name:"images",maxSize:3145728,onDrop:B,onRemove:L,onRemoveAll:G,onUpload:()=>console.log("ON UPLOAD")})]})]})})}),e.jsx(d,{item:!0,xs:12,md:4,children:e.jsxs(l,{spacing:3,children:[e.jsxs(j,{sx:{p:3},children:[e.jsx(y,{name:"inStock",label:"In stock"}),e.jsxs(l,{spacing:3,mt:2,children:[e.jsx(t,{name:"code",label:"Product Code"}),e.jsx(t,{name:"sku",label:"Product SKU"}),e.jsxs(l,{spacing:1,children:[e.jsx(b,{variant:"subtitle2",sx:{color:"text.secondary"},children:"Gender"}),e.jsx(_,{row:!0,spacing:4,name:"gender",options:F})]}),e.jsxs(W,{native:!0,name:"category",label:"Category",children:[e.jsx("option",{value:""}),f.map(a=>e.jsx("optgroup",{label:a.group,children:a.classify.map(i=>e.jsx("option",{value:i,children:i},i))},a.group))]}),e.jsx(J,{name:"tags",label:"Tags",multiple:!0,freeSolo:!0,options:A.map(a=>a),ChipProps:{size:"small"}})]})]}),e.jsxs(j,{sx:{p:3},children:[e.jsxs(l,{spacing:3,mb:2,children:[e.jsx(t,{name:"price",label:"Regular Price",placeholder:"0.00",onChange:a=>n("price",Number(a.target.value),{shouldValidate:!0}),InputLabelProps:{shrink:!0},InputProps:{startAdornment:e.jsx(T,{position:"start",children:e.jsx(R,{component:"span",sx:{color:"text.disabled"},children:"$"})}),type:"number"}}),e.jsx(t,{name:"priceSale",label:"Sale Price",placeholder:"0.00",onChange:a=>n("priceSale",Number(a.target.value)),InputLabelProps:{shrink:!0},InputProps:{startAdornment:e.jsx(T,{position:"start",children:e.jsx(R,{component:"span",sx:{color:"text.disabled"},children:"$"})}),type:"number"}})]}),e.jsx(y,{name:"taxes",label:"Price includes taxes"})]}),e.jsx(Y,{type:"submit",variant:"contained",size:"large",loading:w,children:o?"Save Changes":"Create Product"})]})})]})})}export{Z as P};
