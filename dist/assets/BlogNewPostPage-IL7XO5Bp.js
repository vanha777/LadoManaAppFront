import{at as E,au as H,F as w,a9 as $,aa as m,c9 as P,b$ as z,ca as f,ab as I,ac as e,ad as M,ae as c,ag as r,an as U,cc as V,cd as C,ce as y,aD as L,ak as G,d2 as _,al as Q,aA as J,as as K,aB as X,ax as A}from"./index-kAVNsXXW.js";import{C as Y}from"./CustomBreadcrumbs-07KkEdSP.js";import{e as Z}from"./BlogPostCommentList-shbdXebK.js";import{G as d}from"./Grid-UjSMx0L8.js";import{C as B}from"./Card-yNtnckip.js";import"./IncrementerButton-SLvR_Q0x.js";import"./TextMaxLine-pXA0ho8x.js";import"./CardContent-Yl8ry9fC.js";import"./Zoom-YdLcfH2Q.js";import"./Markdown-EScK2ww8.js";import"./EmptyContent-vRT2zqjA.js";import"./DialogActions-vKtJfWwg.js";const ee=["Dress","Ethnic Wear","Sari Blouse","Others"],te=["New South Wales","Victoria","Queensland","Western Australia","South Australia","Tasmania","Australian Capital Territory","Northern Territory"];function ae(){E();const{enqueueSnackbar:u}=H(),[T,p]=w.useState(!1),q=$().shape({title:m().required("Title is required"),description:m().required("Description is required"),metaType:P().min(1,"Must have at least 1 type").max(1,"Maximum 1 type is allowed"),metaState:P().min(1,"Must have at least 1 state").max(1,"Maximum 1 state is allowed"),cover:z().required("Cover is required"),metaPostCode:f().required("Postcode is a number"),metaAddress:m().required("Address is required"),metaSuburb:m().required("Suburb is required"),metaBudget:f().required("Budget is a number")}),F={metaAddress:"",description:"",cover:[],metaType:[],publish:!0,comments:!0,metaSuburb:"",metaPostCode:0,metaBudget:0,metaState:[]},h=I({resolver:Q(q),defaultValues:F}),{reset:se,watch:O,setValue:o,handleSubmit:x,formState:{isSubmitting:b,isValid:D}}=h,i=O(),N=()=>{p(!0)},g=()=>{p(!1)},j=async t=>{try{await new Promise(l=>setTimeout(l,500)),g(),u("Post success!");const s=t.cover;console.log(typeof t.metaPostCode);const a=new FormData;s.forEach((l,S)=>{a.append("images",l)}),await Object.entries(t).forEach(([l,S])=>{a.append(l,S)});const n=await _.post("http://127.0.0.1:3333/test",a,{withCredentials:!0});console.log(n)}catch(s){console.error(s)}},R=w.useCallback(async t=>{const s=i.cover;await Promise.allSettled(t.map(async a=>{a.preview=URL.createObjectURL(a),s.push(a)})),t.length>0&&o("cover",s,{shouldValidate:!0})},[o,i.cover]),v=()=>{o("cover",null)},k=t=>{const s=t.name,a=i.cover.filter(n=>n.name!==s);console.log(a),o("cover",a)},W=t=>{const s=t.name,a=i.cover.filter(n=>n.name!==s);a.unshift(t),o("cover",a)};return e.jsxs(M,{methods:h,onSubmit:x(j),children:[e.jsxs(d,{container:!0,spacing:3,children:[e.jsx(d,{item:!0,xs:12,md:8,children:e.jsx(B,{sx:{p:3},children:e.jsxs(c,{spacing:3,children:[e.jsx(r,{name:"title",label:"Post Title"}),e.jsx(r,{name:"description",label:"Description",multiline:!0,rows:3}),e.jsxs(c,{spacing:1,children:[e.jsx(U,{variant:"subtitle2",sx:{color:"text.secondary"},children:"Cover"}),e.jsx(V,{onRemoveAll:v,onUpload:!0,multiple:!0,name:"cover",maxSize:3145728,onDrop:R,onDelete:v,thumbnail:!0,onRemove:k,handleSetCover:W})]})]})})}),e.jsxs(d,{item:!0,xs:12,md:4,children:[e.jsx(B,{sx:{p:3},children:e.jsxs(c,{spacing:3,children:[e.jsxs("div",{children:[e.jsx(C,{name:"publish",label:"Publish",labelPlacement:"start",sx:{mb:1,mx:0,width:1,justifyContent:"space-between"}}),e.jsx(C,{name:"comments",label:"Enable comments",labelPlacement:"start",sx:{mx:0,width:1,justifyContent:"space-between"}})]}),e.jsx(y,{name:"metaType",label:"Type",multiple:!0,freeSolo:!0,options:ee.map(t=>t),ChipProps:{size:"small"}}),e.jsx(r,{name:"metaAddress",label:"Street Address"}),e.jsx(r,{name:"metaSuburb",label:"Suburb"}),e.jsx(r,{name:"metaPostCode",label:"Postcode"}),e.jsx(r,{name:"metaBudget",label:"Budget"}),e.jsx(y,{name:"metaState",label:"State",multiple:!0,freeSolo:!0,options:te.map(t=>t),ChipProps:{size:"small"}})]})}),e.jsxs(c,{direction:"row",spacing:1.5,sx:{mt:3},children:[e.jsx(L,{fullWidth:!0,color:"inherit",variant:"outlined",size:"large",onClick:N,children:"Preview"}),e.jsx(G,{fullWidth:!0,type:"submit",variant:"contained",size:"large",loading:b,children:"Post"})]})]})]}),e.jsx(Z,{values:i,open:T,isValid:D,isSubmitting:b,onClose:g,onSubmit:x(j)})]})}function be(){const{themeStretch:u}=J();return e.jsxs(e.Fragment,{children:[e.jsx(K,{children:e.jsx("title",{children:" Blog: New Post | Minimal UI"})}),e.jsxs(X,{maxWidth:u?!1:"lg",children:[e.jsx(Y,{heading:"Create a new post",links:[{name:"Dashboard",href:A.root},{name:"Blog",href:A.blog.root},{name:"Create"}]}),e.jsx(ae,{})]})]})}export{be as default};
