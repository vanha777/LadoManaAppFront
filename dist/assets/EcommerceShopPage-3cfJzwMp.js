import{az as q,bE as k,ac as e,ae as p,bp as F,aN as v,aD as T,aj as y,aM as u,bF as W,ax as A,aS as J,bG as Q,aO as $,ao as M,ap as X,aR as E,bH as Y,F as P,bI as O,b3 as Z,b4 as ee,bJ as re,bK as te,an as b,ai as se,b2 as ne,aP as ae,bL as oe,bM as ie,bN as le,bO as ce,b6 as de,bP as pe,bQ as xe,bg as he,aL as ue,at as me,bR as ge,bS as je,ah as be,bT as fe,bU as ve,bV as ye,aA as Ce,bW as Re,ab as we,bX as Se,as as Fe,ad as Pe,aB as Ie}from"./index-kAVNsXXW.js";import{o as I}from"./orderBy-9liVrfYv.js";import{C as Te}from"./CustomBreadcrumbs-07KkEdSP.js";import{s as Ae}from"./index-Y0zBF9nK.js";import{C as Oe,a as ke}from"./ColorSinglePicker-3AMF9EUF.js";import{p as G}from"./index-7OLVL5xd.js";import{C as H}from"./Card-yNtnckip.js";import{S as R}from"./Skeleton-ET3ifG4q.js";import"./SkeletonConversationItem-L95VVb_N.js";import{R as N}from"./Rating-w1NpzLI0.js";import{a as De}from"./IncrementerButton-SLvR_Q0x.js";import{C as Be}from"./CartWidget-cSC3AcSk.js";V.propTypes={isFiltered:u.bool,onResetFilter:u.func};function V({isFiltered:t,onResetFilter:d}){const o=q(),{watch:c,setValue:a}=k(),i=c(),{gender:l,category:x,colors:r,priceRange:s,rating:n}=i,h=s[0],m=s[1],g=j=>{const B=l.filter(L=>L!==j);a("gender",B)},f=()=>{a("category","All")},C=j=>{const B=r.filter(L=>L!==j);a("colors",B)},S=()=>{a("priceRange",[0,200])},D=()=>{a("rating","")};return e.jsxs(p,{flexGrow:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:[!!l.length&&e.jsx(w,{label:"Gender:",children:l.map(j=>e.jsx(F,{label:j,size:"small",onDelete:()=>g(j),sx:{m:.5}},j))}),x!=="All"&&e.jsx(w,{label:"Category:",children:e.jsx(F,{size:"small",label:x,onDelete:f,sx:{m:.5}})}),!!r.length&&e.jsx(w,{label:"Colors:",children:r.map(j=>e.jsx(F,{size:"small",label:e.jsx(v,{sx:{width:20,height:20,bgcolor:j,borderRadius:"50%",border:`solid 1px ${o.palette.divider}`}}),onDelete:()=>C(j),sx:{m:.5,color:o.palette.getContrastText(j),"& .MuiChip-label":{pl:.25}}},j))}),(h!==0||m!==200)&&e.jsx(w,{label:"Price:",children:e.jsx(F,{size:"small",label:`$${h} - ${m}`,onDelete:S,sx:{m:.5}})}),!!n&&e.jsx(w,{label:"Rating:",children:e.jsx(F,{size:"small",label:Ae(n),onDelete:D,sx:{m:.5}})}),t&&e.jsx(T,{color:"error",size:"small",onClick:d,startIcon:e.jsx(y,{icon:"eva:trash-2-outline"}),children:"Clear"})]})}w.propTypes={sx:u.object,label:u.string,children:u.node};function w({label:t,children:d,sx:o}){return e.jsxs(p,{direction:"row",alignItems:"stretch",sx:{m:.5,borderRadius:1,overflow:"hidden",border:c=>`solid 1px ${c.palette.divider}`,...o},children:[e.jsx(p,{component:"span",direction:"row",alignItems:"center",sx:{px:1,typography:"subtitle2",color:"text.secondary",bgcolor:"background.neutral",borderRight:c=>`solid 1px ${c.palette.divider}`},children:t}),e.jsx(p,{direction:"row",flexWrap:"wrap",sx:{p:.75},children:d})]})}_.propTypes={product:u.object};function _({product:t}){const{id:d,name:o,cover:c,price:a,colors:i,status:l,available:x,sizes:r,priceSale:s}=t,n=W(),h=A.eCommerce.view(G(o)),m=async()=>{const g={id:d,name:o,cover:c,available:x,price:a,colors:[i[0]],size:r[0],quantity:1};try{n(Y(g))}catch(f){console.error(f)}};return e.jsxs(H,{sx:{"&:hover .add-cart-btn":{opacity:1}},children:[e.jsxs(v,{sx:{position:"relative",p:1},children:[l&&e.jsx(J,{variant:"filled",color:l==="sale"&&"error"||"info",sx:{top:16,right:16,zIndex:9,position:"absolute",textTransform:"uppercase"},children:l}),e.jsx(Q,{color:"warning",size:"medium",className:"add-cart-btn",onClick:m,sx:{right:16,bottom:16,zIndex:9,opacity:0,position:"absolute",transition:g=>g.transitions.create("all",{easing:g.transitions.easing.easeInOut,duration:g.transitions.duration.shorter})},children:e.jsx(y,{icon:"ic:round-add-shopping-cart"})}),e.jsx($,{alt:o,src:c,ratio:"1/1",sx:{borderRadius:1.5}})]}),e.jsxs(p,{spacing:2.5,sx:{p:3},children:[e.jsx(M,{component:X,to:h,color:"inherit",variant:"subtitle2",noWrap:!0,children:o}),e.jsxs(p,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(Oe,{colors:i}),e.jsxs(p,{direction:"row",spacing:.5,sx:{typography:"subtitle1"},children:[s&&e.jsx(v,{component:"span",sx:{color:"text.disabled",textDecoration:"line-through"},children:E(s)}),e.jsx(v,{component:"span",children:E(a)})]})]})]})]})}function Le({...t}){return e.jsxs(H,{...t,children:[e.jsx(R,{variant:"rectangular",sx:{paddingTop:"100%"}}),e.jsxs(p,{spacing:2,sx:{p:3},children:[e.jsx(R,{variant:"text",sx:{width:.5}}),e.jsxs(p,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(p,{direction:"row",children:[e.jsx(R,{variant:"circular",sx:{width:16,height:16}}),e.jsx(R,{variant:"circular",sx:{width:16,height:16}}),e.jsx(R,{variant:"circular",sx:{width:16,height:16}})]}),e.jsx(R,{variant:"text",sx:{width:40}})]})]})]})}U.propTypes={loading:u.bool,products:u.array};function U({products:t,loading:d,...o}){return e.jsx(v,{gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)"},...o,children:(d?[...Array(12)]:t).map((c,a)=>c?e.jsx(_,{product:c},c.id):e.jsx(Le,{},a))})}const ze=[{value:"featured",label:"Featured"},{value:"newest",label:"Newest"},{value:"priceDesc",label:"Price: High - Low"},{value:"priceAsc",label:"Price: Low - High"}];function Ee(t){return{featured:"Featured",newest:"Newest",priceDesc:"Price: High - Low",priceAsc:"Price: Low - High"}[t]}function Ne(){const{control:t}=k(),[d,o]=P.useState(null),c=i=>{o(i.currentTarget)},a=()=>{o(null)};return e.jsx(O,{name:"sortBy",control:t,render:({field:i})=>e.jsxs(e.Fragment,{children:[e.jsxs(T,{disableRipple:!0,color:"inherit",onClick:c,endIcon:e.jsx(y,{icon:d?"eva:chevron-up-fill":"eva:chevron-down-fill"}),sx:{fontWeight:"fontWeightMedium"},children:["Sort By:",e.jsx(v,{component:"span",sx:{color:"text.secondary",ml:.5},children:Ee(i.value)})]}),e.jsx(Z,{open:d,onClose:a,children:ze.map(l=>e.jsx(ee,{selected:l.value===i.value,onClick:()=>{a(),i.onChange(l.value)},children:l.label},l.value))})]})})}const We=[{label:"Men",value:"Men"},{label:"Women",value:"Women"},{label:"Kids",value:"Kids"}],$e=[{label:"All",value:"All"},{label:"Shose",value:"Shose"},{label:"Apparel",value:"Apparel"},{label:"Accessories",value:"Accessories"}],Me=["up4Star","up3Star","up2Star","up1Star"],Ge=["#00AB55","#000000","#FFFFFF","#FFC0CB","#FF4842","#1890FF","#94D82D","#FFC107"];K.propTypes={open:u.bool,onOpen:u.func,onClose:u.func,isDefault:u.bool,onResetFilter:u.func};function K({open:t,onOpen:d,onClose:o,isDefault:c,onResetFilter:a}){const{control:i}=k(),l=[...Array(21)].map((r,s)=>{const n=s*10,h=s===0?`$${n}`:`${n}`;return{value:n,label:s%4?"":h}}),x=(r,s)=>r.includes(s)?r.filter(n=>n!==s):[...r,s];return e.jsxs(e.Fragment,{children:[e.jsx(T,{disableRipple:!0,color:"inherit",endIcon:e.jsx(y,{icon:"ic:round-filter-list"}),onClick:d,children:"Filters"}),e.jsxs(re,{anchor:"right",open:t,onClose:o,BackdropProps:{invisible:!0},PaperProps:{sx:{width:te.W_BASE}},children:[e.jsxs(p,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{pl:2,pr:1,py:2},children:[e.jsx(b,{variant:"subtitle1",children:"Filters"}),e.jsx(se,{onClick:o,children:e.jsx(y,{icon:"eva:close-fill"})})]}),e.jsx(ne,{}),e.jsx(ae,{children:e.jsxs(p,{spacing:3,sx:{p:2.5},children:[e.jsxs(p,{spacing:1,children:[e.jsx(b,{variant:"subtitle1",children:" Gender "}),e.jsx(oe,{name:"gender",options:We,sx:{width:1}})]}),e.jsxs(p,{spacing:1,children:[e.jsx(b,{variant:"subtitle1",children:" Category "}),e.jsx(ie,{name:"category",options:$e,row:!1})]}),e.jsxs(p,{spacing:1,children:[e.jsx(b,{variant:"subtitle1",children:" Color "}),e.jsx(O,{name:"colors",control:i,render:({field:r})=>e.jsx(ke,{selected:r.value,colors:Ge,onChangeColor:s=>r.onChange(x(r.value,s)),sx:{maxWidth:36*4}})})]}),e.jsxs(p,{spacing:1,sx:{pb:2},children:[e.jsx(b,{variant:"subtitle1",sx:{flexGrow:1},children:"Price"}),e.jsxs(p,{direction:"row",spacing:2,children:[e.jsx(z,{type:"min"}),e.jsx(z,{type:"max"})]}),e.jsx(le,{name:"priceRange",step:10,min:0,max:200,marks:l,getAriaValueText:r=>`$${r}`,valueLabelFormat:r=>`$${r}`,sx:{alignSelf:"center",width:"calc(100% - 20px)"}})]}),e.jsxs(p,{spacing:1,children:[e.jsx(b,{variant:"subtitle1",children:"Rating"}),e.jsx(O,{name:"rating",control:i,render:({field:r})=>e.jsx(ce,{...r,children:Me.map((s,n)=>e.jsx(de,{value:s,control:e.jsx(pe,{disableRipple:!0,color:"default",icon:e.jsx(N,{readOnly:!0,value:4-n}),checkedIcon:e.jsx(N,{readOnly:!0,value:4-n}),sx:{"&:hover":{bgcolor:"transparent"}}}),label:"& Up",sx:{my:.5,borderRadius:1,"&:hover":{opacity:.48},...r.value.includes(s)&&{bgcolor:"action.selected"}}},s))})})]})]})}),e.jsx(v,{sx:{p:2.5},children:e.jsx(xe,{color:"error",variant:"dot",anchorOrigin:{vertical:"top",horizontal:"left"},invisible:c,sx:{width:1},children:e.jsx(T,{fullWidth:!0,size:"large",type:"submit",color:"inherit",variant:"outlined",onClick:a,startIcon:e.jsx(y,{icon:"eva:trash-2-outline"}),children:"Clear"})})})]})]})}z.propTypes={type:u.oneOf(["min","max"])};function z({type:t}){const{control:d,setValue:o}=k(),c=a=>{const i=a[0],l=a[1];i<0&&o("priceRange",[0,l]),i>200&&o("priceRange",[200,l]),l<0&&o("priceRange",[i,0]),l>200&&o("priceRange",[i,200])};return e.jsx(O,{name:"priceRange",control:d,render:({field:a})=>{const i=t==="min",l=a.value[0],x=a.value[1];return e.jsxs(p,{direction:"row",spacing:.5,alignItems:"center",sx:{width:1},children:[e.jsx(b,{variant:"caption",sx:{flexShrink:0,color:"text.disabled",textTransform:"capitalize",fontWeight:"fontWeightBold"},children:`${t} ($)`}),e.jsx(he,{disableUnderline:!0,fullWidth:!0,size:"small",value:i?l:x,onChange:r=>i?a.onChange([Number(r.target.value),x]):a.onChange([l,Number(r.target.value)]),onBlur:()=>c(a.value),inputProps:{step:10,min:0,max:200,type:"number","aria-labelledby":"input-slider"},sx:{pr:1,py:.5,borderRadius:.75,typography:"body2",bgcolor:r=>ue(r.palette.grey[500],.12),"& .MuiInput-input":{p:0,textAlign:"right"}}})]})}})}function He(){const t=me(),[d,o]=P.useState(""),[c,a]=P.useState([]),i=async r=>{try{if(o(r),r){const s=await ye.get("/api/products/search",{params:{query:r}});a(s.data.results)}}catch(s){console.error(s)}},l=r=>{t(A.eCommerce.view(G(r)))},x=r=>{r.key==="Enter"&&l(d)};return e.jsx(ge,{size:"small",autoHighlight:!0,popupIcon:null,options:c,onInputChange:(r,s)=>i(s),getOptionLabel:r=>r.name,noOptionsText:e.jsx(je,{query:d}),isOptionEqualToValue:(r,s)=>r.id===s.id,componentsProps:{popper:{sx:{width:"280px !important"}},paper:{sx:{"& .MuiAutocomplete-option":{px:"8px !important"}}}},renderInput:r=>e.jsx(De,{...r,width:220,placeholder:"Search...",onKeyUp:x,InputProps:{...r.InputProps,startAdornment:e.jsx(be,{position:"start",children:e.jsx(y,{icon:"eva:search-fill",sx:{ml:1,color:"text.disabled"}})})}}),renderOption:(r,s,{inputValue:n})=>{const{name:h,cover:m}=s,g=fe(h,n),f=ve(h,g);return e.jsxs("li",{...r,children:[e.jsx($,{alt:m,src:m,sx:{width:48,height:48,borderRadius:1,flexShrink:0,mr:1.5}}),e.jsx(M,{underline:"none",onClick:()=>l(h),children:f.map((C,S)=>e.jsx(b,{component:"span",variant:"subtitle2",color:C.highlight?"primary":"textPrimary",children:C.text},S))})]})}})}function sr(){const{themeStretch:t}=Ce(),d=W(),{products:o,checkout:c}=Re(D=>D.product),[a,i]=P.useState(!1),x=we({defaultValues:{gender:[],category:"All",colors:[],priceRange:[0,200],rating:"",sortBy:"featured"}}),{reset:r,watch:s,formState:{dirtyFields:n}}=x,h=!n.gender&&!n.category&&!n.colors&&!n.priceRange&&!n.rating||!1,m=s(),g=Ve(o,m);P.useEffect(()=>{d(Se())},[d]);const f=()=>{r()},C=()=>{i(!0)},S=()=>{i(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(Fe,{children:e.jsx("title",{children:" Ecommerce: Shop | Minimal UI"})}),e.jsx(Pe,{methods:x,children:e.jsxs(Ie,{maxWidth:t?!1:"lg",children:[e.jsx(Te,{heading:"Shop",links:[{name:"Dashboard",href:A.root},{name:"E-Commerce",href:A.eCommerce.root},{name:"Shop"}]}),e.jsxs(p,{spacing:2,direction:{xs:"column",sm:"row"},alignItems:{sm:"center"},justifyContent:"space-between",sx:{mb:2},children:[e.jsx(He,{}),e.jsxs(p,{direction:"row",spacing:1,flexShrink:0,sx:{my:1},children:[e.jsx(K,{isDefault:h,open:a,onOpen:C,onClose:S,onResetFilter:f}),e.jsx(Ne,{})]})]}),e.jsx(p,{sx:{mb:3},children:!h&&e.jsxs(e.Fragment,{children:[e.jsxs(b,{variant:"body2",gutterBottom:!0,children:[e.jsx("strong",{children:g.length}),"Â Products found"]}),e.jsx(V,{isFiltered:!h,onResetFilter:f})]})}),e.jsx(U,{products:g,loading:!o.length&&h}),e.jsx(Be,{totalItems:c.totalItems})]})})]})}function Ve(t,d){const{gender:o,category:c,colors:a,priceRange:i,rating:l,sortBy:x}=d,r=i[0],s=i[1];return x==="featured"&&(t=I(t,["sold"],["desc"])),x==="newest"&&(t=I(t,["createdAt"],["desc"])),x==="priceDesc"&&(t=I(t,["price"],["desc"])),x==="priceAsc"&&(t=I(t,["price"],["asc"])),o.length&&(t=t.filter(n=>o.includes(n.gender))),c!=="All"&&(t=t.filter(n=>n.category===c)),a.length&&(t=t.filter(n=>n.colors.some(h=>a.includes(h)))),(r!==0||s!==200)&&(t=t.filter(n=>n.price>=r&&n.price<=s)),l&&(t=t.filter(n=>{const h=m=>m==="up4Star"?4:m==="up3Star"?3:m==="up2Star"?2:1;return n.totalRating>h(l)})),t}export{sr as default};
